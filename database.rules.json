{
    "rules": {
      "users": {
        // Allows any authenticated user to query the /users list.
        ".read": "auth != null",
        // UPDATED: Added an index for the new lowercase username field.
        ".indexOn": ["username", "username_lowercase"],
        "$uid": {
          // This rule remains unchanged. It correctly allows a user
          // to write ONLY to their own profile node.
          ".write": "auth != null && auth.uid === $uid"
        }
      },
      "uploads": {
        // These rules remain unchanged.
        ".read": "auth != null",
        ".write": "auth != null",
        ".indexOn": ["uid"]
      },
      "feedback": {
        // This rule remains unchanged.
        ".write": "auth != null"
      }
    }
  }
  